Задача 2. Ролевой помощник

По пятницам мы часто играем в популярную ролевую игру "Релиз до выходных" с коллегами. Правила этой игры довольно сложны и предполагают хорошую стратегию и планирование. Чтобы иметь представление о последствиях тех или иных ходов, часто хочется понимать, насколько вероятен тот или иной исход ситуации, с учетом разных вариантов выпадения игральных костей.

Необходимо написать программу, которая сможет, приняв на вход последовательность операндов и операций, вывести все возможные варианты результата и их вероятности.

Выражение на входе может содержать скобки, и следующие операторы в порядке уменьшения их приоритета:

* – умножение

+ и - – сложение и вычитание

> - левый операнд больше, чем правый. Результат равен 1, если истинно, и 0 - если ложно

Операторы равного приоритета выполняются слева направо.

В качестве операндов могут выступать:

n - целые положительные числа, либо 0 (0≤n≤100 000)

dn - результат броска игральной кости, где n целое положительное число, количество граней (1≤n≤100). Результатом будет равномерное распределение вероятностей между всеми гранями (от 1 до n). Каждый такой операнд в выражении – это результат отдельного броска (например, d4+d4 – это сумма результатов двух разных бросков четырехгранной кости).

Например, для входной строки d4+(d6>2) правильным ответом будет:

1 8.33
2 25.00
3 25.00
4 25.00
5 16.67
